import supabase
import os
from supabase import create_client, Client

url: str = os.environ.get("SUPABASE_URL")
key: str = os.environ.get("SUPABASE_KEY")
supabase: Client = create_client(url, key)

query = [-0.09365684539079666, 0.08936997503042221, -0.07701199501752853, 0.024372726678848267, -0.03321758285164833, -0.054337866604328156, 0.06811635941267014, 0.0018367284210398793, 0.05471361428499222, 0.010912488214671612, 0.05880182608962059, -0.02877577766776085, -0.06972980499267578, -0.04950078949332237, -0.046930331736803055, -0.11222117394208908, -0.008211602456867695, 0.08737079799175262, 0.005759050138294697, -0.030673813074827194, 0.004455134738236666, -0.009387499652802944, 0.058133501559495926, 0.005870060995221138, -0.039946939796209335, -0.022005219012498856, -0.018553147092461586, -0.0240770410746336, 0.1109689250588417, -0.03181833401322365, 0.04275083541870117, -0.007281629368662834, -0.030115976929664612, -0.028356216847896576, -0.1053561270236969, 0.051752373576164246, -0.01289606187492609, -0.017173470929265022, -0.05484147369861603, -0.03636191785335541, -0.030224395915865898, 0.006176612805575132, -0.026852836832404137, -0.017581341788172722, 0.006756911054253578, -0.04455599933862686, -0.04573986679315567, 0.018745843321084976, 0.0057217213325202465, -0.027953654527664185, 0.004442994948476553, -0.03000994585454464, -0.07941535860300064, -0.03502392768859863, -0.03111368976533413, 0.01566324755549431, -0.025423450395464897, -0.06131063029170036, 0.0967404693365097, 0.03137458488345146, 0.09108585864305496, 0.055992212146520615, -0.06425806879997253, 0.10403770208358765, -0.07377498596906662, -0.06511126458644867, 0.046870868653059006, 5.4615375120192766e-05, -0.04935688525438309, 0.04450572654604912, 0.023608185350894928, -0.1063174307346344, 0.06242621690034866, 0.013407389633357525, -0.0158697459846735, -0.028689492493867874, 0.06793443113565445, -0.016028210520744324, 0.028625022619962692, -0.02561279945075512, -0.008208706974983215, -0.006330148782581091, 0.049433279782533646, 0.08047710359096527, -0.005369678605347872, 0.02340429648756981, 0.06572146713733673, -0.0635947436094284, 0.07507198303937912, -0.050401248037815094, -0.012428413145244122, -0.00692660640925169, 0.02013116516172886, 0.005620693322271109, 0.006109963171184063, 0.07295393943786621, -0.038500022143125534, 0.1044035479426384, -0.03639698401093483, 0.11743465065956116, -0.04813117906451225, 0.0034268060699105263, 0.029824115335941315, 0.06560657918453217, -0.0402795635163784, 0.013903538696467876, 0.0793057531118393, -0.05748693645000458, 0.003725325455889106, -0.00843129213899374, -0.08103280514478683, -0.05107303336262703, -0.020604699850082397, -0.033475808799266815, 0.03437510505318642, -0.0095028942450881, -0.0008616740815341473, -0.023916587233543396, -0.01388049591332674, 0.10118816792964935, 0.032754071056842804, 0.0038153561763465405, -0.05683355778455734, -0.008687364868819714, 0.0496157668530941, 0.06991472095251083, -0.007602290716022253, -1.1270977055625985e-32, -0.013813312165439129, -0.03420981019735336, -0.0009016669355332851, -0.024959133937954903, -0.0002184795739594847, 0.024084242060780525, -0.015864677727222443, -0.05705476552248001, -0.02655857987701893, 0.03730481490492821, -0.048678141087293625, -0.02342863753437996, -0.09887281805276871, 0.0900995060801506, 0.0329546183347702, 0.07549839466810226, 0.05409589782357216, 0.0197230726480484, 0.009806202724575996, -0.06752804666757584, 0.05790282040834427, 0.08214768022298813, 0.03757454454898834, -0.004666273482143879, 0.1126670390367508, 0.014521772973239422, -0.0007954349275678396, -0.024241333827376366, 0.0285332091152668, 0.050999272614717484, -0.025429734960198402, -0.01101764477789402, 0.007032393012195826, -0.027705775573849678, 0.027128951624035835, 0.03822050616145134, -0.02465205453336239, -0.04118978977203369, -0.004112435504794121, 0.09609228372573853, 0.08178732544183731, -0.020544927567243576, -0.02566797286272049, -0.000697646290063858, -0.04084997996687889, 0.03216344863176346, 0.06388381123542786, -0.022794226184487343, 0.05175674334168434, -0.046934984624385834, -0.03365781158208847, -0.022292112931609154, -0.030781595036387444, -0.012424442917108536, -0.012974700890481472, 0.08847775310277939, -0.041569825261831284, 0.011259936727583408, 0.010685118846595287, -0.01567678153514862, 0.03339875862002373, 0.03609573841094971, 0.0263838954269886, 0.03885428234934807, 0.06143132597208023, -0.09034093469381332, -0.0022292633075267076, 0.018247757107019424, 0.027786744758486748, -0.0850757583975792, -0.14040033519268036, -0.0267946757376194, 0.013200225308537483, -0.00680314376950264, 0.030643204227089882, 0.044818006455898285, 0.01723514124751091, -0.030834002420306206, -0.06987043470144272, -0.021878158673644066, -0.15627822279930115, 0.009006433188915253, 0.01994924247264862, 0.0044249496422708035, -0.004868173040449619, 0.0075403121300041676, -0.014545363374054432, -0.026690781116485596, 0.00032461140654049814, -0.01121580135077238, -0.027634622529149055, 0.021463220939040184, -0.03227531164884567, -0.015179496258497238, -0.15723274648189545, 6.394900122772423e-33, -0.04422779008746147, 0.02035859227180481, -0.011331814341247082, 0.04061610996723175, 0.04217856004834175, 0.012527045793831348, -0.021186532452702522, 0.08868394792079926, 0.025618331506848335, -0.010146948508918285, -0.05725625157356262, -0.027458781376481056, 0.06277585029602051, -0.04363681375980377, 0.037455447018146515, -0.021234208717942238, 0.016566338017582893, 0.002790896687656641, -0.018560240045189857, 0.015585961751639843, -0.026372993364930153, 0.08075618743896484, 0.06354043632745743, -0.0544118694961071, 0.013856853358447552, -0.0013930838322266936, 0.09070474654436111, 0.0011113786604255438, -0.07057567685842514, -0.02044832333922386, 0.054037127643823624, -0.06451660394668579, -0.009356575086712837, -0.02586081065237522, 0.014974393881857395, 0.07693802565336227, 0.024289308115839958, -0.022632746025919914, 0.01661721244454384, 0.006017438136041164, 0.10070234537124634, -0.014254248701035976, 0.05316496267914772, 0.018427381291985512, 0.04555567726492882, 0.03535572811961174, 0.06426455080509186, 0.026341939345002174, -0.022221723571419716, -0.1050783321261406, 0.003516177646815777, -0.0181487537920475, 0.001112071331590414, 0.06808118522167206, 0.06444873660802841, -0.0734657496213913, -0.03652292117476463, -0.017431749030947685, -0.0034473745618015528, 0.08175422996282578, 0.04547090083360672, 0.010691270232200623, -0.018719950690865517, 0.08892617374658585, 0.022420944646000862, 0.026814591139554977, -0.09224028885364532, -0.05610417574644089, 0.006655784789472818, 0.001329583814367652, 0.06547638028860092, -0.07499639689922333, -0.1483537256717682, -0.043736282736063004, -0.07178395241498947, 0.035354845225811005, -0.014960138127207756, -0.09746432304382324, 0.052491363137960434, -0.11707746982574463, -0.08802133798599243, -0.04054990038275719, -0.011091716587543488, 0.031049057841300964, -0.009506472386419773, -0.021181749179959297, -0.03981095179915428, -0.0046903835609555244, 0.1576877385377884, 0.03570874035358429, 0.019983507692813873, -0.04079463332891464, 0.008368030190467834, -0.09419802576303482, -0.0006730817258358002, -1.5770234895740032e-08, 0.035355694591999054, 0.04899792745709419, -0.01873893477022648, 0.005425677634775639, -0.039695337414741516, 0.003938894718885422, -0.062489673495292664, -0.10981891304254532, -0.01368855033069849, 0.143403097987175, -0.026311878114938736, -0.005207851529121399, 0.057078659534454346, -0.08656978607177734, 0.05742812156677246, 0.011999565176665783, 0.027774548158049583, 0.07584860920906067, -0.03124154731631279, -0.06059843301773071, 0.0975797176361084, 0.006691654212772846, 0.04542940855026245, -0.06173979118466377, 0.042790185660123825, -0.08030378818511963, -0.03432939201593399, -0.023442810401320457, 0.03935515135526657, -0.023405959829688072, 0.02185186557471752, 0.07344689220190048, 0.01736617647111416, 0.0009107984369620681, 0.03235101327300072, 0.048962559551000595, -0.010716465301811695, -0.02482089214026928, 0.06067732721567154, -0.05085182562470436, 0.07562796026468277, 0.005510034039616585, 0.07276228815317154, 0.012524869292974472, -0.0632994994521141, 0.05590556934475899, 0.11495725810527802, -0.02906172350049019, 0.01584339514374733, -0.04526221379637718, -0.0048501756973564625, 0.042621731758117676, 0.022561118006706238, 0.06108197197318077, -0.006491451989859343, -0.14707590639591217, -0.01585574820637703, 0.010427446104586124, -0.01713990978896618, -0.05637660622596741, 0.03300344944000244, -0.024393262341618538, -0.021631354466080666, -0.003235494950786233]

response = (
    supabase.rpc(
            'vector_search',
            {
                'query_embedding': query,
                'match_count': 3,
                'filter': {'source': 'TUAS_docs'}
            }
        ).execute()
)

# response = (
#     supabase.table("site_pages")
#     .select("source")
#     .eq("id", 1006)
#     .execute()
# )

# print(response.data)

for x in response.data:

    print(x["summary"]) 